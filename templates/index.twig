{# @var craft \craft\web\twig\variables\CraftVariable #}
{# @var entry \craft\elements\Entry #}
{# ======================================================
  @filename: index
  @date:     288 Oct 2019
  ====================================================== #}
{#
  Template file for the homepage
#}

{# {% import "_partials/_macros.twig" as macro %} #}
{# uncomment line above if you need to use macros in your template #}
{% extends "_layouts/_layout.twig" %}

{% block _inline_css %}
  <style>
    {{ source ("index_critical.min.css", ignore_missing = true) }}
  </style>
{% endblock %}

{% block content %}
  {% include '_partials/_index/header' with {
    image: entry.headerImage.one(),
    wave: true,
    payoff: true
  } %}

  {# Get start time and end time of day #}
  {% set calendars = craft.calendar.calendars() %}
  {% set calendarsIds = [] %}
  {% for calendar in calendars %}
    {% set calendarsIds = calendarsIds | merge ([calendar.id]) %}
  {% endfor %}

  {% set day = craft.calendar.day({
    date: 'today',
    calendarId: calendarsIds
  }) %}

  {% set startTime = '' %}
  {% set endTime = '' %}

  {% for event in day.events %}
    {% if loop.first %}
      {% set startTime = event.startDate %}
      {% set endTime = event.endDate %}
    {% else %}
      {% set startTime = startTime < event.startDate ? startTime : event.startDate %}
      {% set endTime = endTime > event.endDate ? endTime : event.endDate %}
    {% endif %}
  {% endfor %}

  <div class="bg-teal pt-2 pt-lg-4">
    <div class="container">
      <div class="d-flex flex-column justify-content-center w-100 w-sm-auto flex-sm-grow-0 flex-sm-row mb-4">
        <div class="bg-teal-500 rounded-sm d-flex flex-column align-items-center px-2 px-md-4 py-3 px-lg-5">
          <div class="w-14 d-lg-flex flex-lg-row w-lg-auto">
            <div class="d-flex flex-row align-items-center mb-1 mr-lg-2 mb-lg-0">
              <svg class="mr-2 flex-shrink-0" width="35" height="35">
                <use xlink:href="/assets/images/svg/sprite/sprite.svg#icon-calendar"></use>
              </svg>
              <span class="text-white weight-700">
                {% if startTime | length and endTime | length %}
                  Vandaag geopend van <span class="text-yellow">{{ startTime.format('H:i') }}</span> tot <span class="text-yellow">{{ endTime.format('H:i') }}</span>
                {% else %}
                  Vandaag gesloten
                {% endif %}
              </span>
            </div>
            <div class="d-flex flex-row align-items-center ml-lg-2">
              <svg class="mr-2 flex-shrink-0" width="35" height="35">
                <use xlink:href="/assets/images/svg/sprite/sprite.svg#icon-marker"></use>
              </svg>
              <span class="text-white weight-700">Gruttostraat 3, Velp</span>
            </div>
          </div>
        </div>
      </div>

      <div class="w-100 d-flex flex-row justify-content-center">
        <p class="text-center text-white mb-0 pb-4 col-lg-10">
          Water is een bron van energie. Beweeg lekker in ons bad, voel je vrij en laad je weer helemaal op. Het geeft
          power aan lichaam en geest. Dus kom leren zwemmen, revalideren, fit worden, ontspannen of spieren
          trainen. Binnenkort in het Biljoenbad!
        </p>
      </div>
    </div>
  </div>

  <div class="wave bg-teal-100 pb-4 pb-lg-8">
    {% include '_inline/_svg/lower-wave' with {
      class: 'lower-wave'
    } %}
  </div>
  <div class="bg-teal-100 pb-4 pb-lg-8" id="activiteiten">
    {% include '_partials/_index/activities' %}
  </div>
  <div class="container mt-5 mt-lg-10" id="sfeerimpressie">
    {% include '_partials/_index/impression' %}
  </div>
  <div class="bg-teal-100 pt-5 pb-5 pt-lg-8">
    <div class="container" id="locatie">
      {% include '_partials/_index/location' %}
    </div>
  </div>
  <div class="container pt-5 pb-2 pb-lg-3 pt-lg-8" id="veelgestelde-vragen">
    {% include '_partials/_index/faq' %}
  </div>
{% endblock %}

{% block _inline_js %}
{% endblock %}
