{# @var craft \craft\web\twig\variables\CraftVariable #}
{# @var entry \craft\elements\Entry #}
{# ======================================================
  @filename: _entry
  @author:   sam
  ====================================================== #}
{#
  Add a small discription about this file/componennt and what it does
#}

{% extends "_layouts/_layout.twig" %}

{% block _inline_css %}
  <style>
    {{ source ("index_critical.min.css", ignore_missing = true) }}
  </style>
{% endblock %}

{% block content %}
  {% cache %}
    {% include '_partials/_global/header' with {
      title: entry.title,
      intro: entry.intro
    } %}
  {% endcache %}

  {% set activities = craft.entries.section('activities').descendantOf(entry.id).all() %}

  <div id="mainContentSkip">
    {% if activities | length %}
      <div class="container">
        <h2 class="mb-3">{{ entry.activitiesOverviewTitle }}</h2>
        <div class="row">
          <div class="d-flex flex-column mb-4 flex-md-row flex-md-wrap mb-lg-8">
            {% for activity in activities %}
              <div class="col-12 d-flex mb-3 col-md-6 col-lg-4">
                {% include '_partials/_components/cta-blocks/cta-block/cta-block.twig' with {
                  title: activity.title,
                  mainImage: activity.headerImage.one(),
                  subContent: activity.summaryText | striptags[:90] ~ '...',
                  cta: { url: activity.url, text: 'Lees meer', target: '' },
                  ctaArrow: true,
                  swiper: false,
                  titleBgHexColor: entry.categoryColor,
                  titleHexColor: entry.categoryColor.label == 'Geel' ? '#033b47' : '#fff'
                } %}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% cache %}
        {% include "_partials/_common/matrix.twig" %}
      {% endcache %}
    {% endif %}
  </div>
{% endblock %}

{% block _inline_js %}
{% endblock %}
